@model IEnumerable<Winery.Models.RegionViewModel>

@{
    ViewBag.Title = "Region";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<div class="container">
    <div class="row py-5">

        <div class="col-md-4 border-right">
            <div class="form-group">
                <label class="display-4 text-left" for="inputsm">Add new region</label>
                <input class="form-control input-form-control-lg" id="region" type="text" placeholder="Enter region name">
                <button class="btn btn-md  mt-2 text-center" onclick="addRegion()">Add</button>
            </div>            
        </div>

        <div class="col-md-8">

            <div class="row listregions">
                @foreach (var item in Model)
                {

                    <div id="DIV_@item.RegionID" class="col-md-3 m-1 py-3 text-justify">
                        <span class="h3">@Html.DisplayFor(modelItem => item.RegionName)</span>
                        <button class="btn btn-light m-2 delete" onclick="deleteRegion(@item.RegionID)">Delete</button>
                    </div>

                }
                <div id="newRegion"></div>
            </div>

        </div>
    </div>
</div>
<script>
    function addRegion(id) {
        var region = $("#region").val();

        var data = { RegionName: region, RegionID: id };
          $.ajax({
            url: '@Url.Action("AddRegion","AdminRegionCountry")',
                type: "Post",
                data:data,
                
              success: function (response) {

                  $("#newRegion").html(`
                        <div id="DIV_"class="col-md-3 m-1 py-3 text-center">
                        <span class="h3">${region}</span>
                        <button class="btn btn-light mt-2 delete" onclick="deleteRegion(${id})" >Delete</button>
                    </div>
                `);
                alert("Region added");
                           
                }
        });
    }

     function deleteRegion(id) {
        $.ajax({
            url: '@Url.Action("DeleteRegion","AdminRegionCountry")' + '/' + id,
            data: { id: id },
            success: function (response) {
                $("#DIV_" + id).html(" ");
                alert("Region deleted");
            }
        });
    }
</script>
